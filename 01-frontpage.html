<!DOCTYPE html>
<html>
	<head>
		<title>Dev Challenge</title>
		<meta charset="utf-8"/>
		<!-- JQuery -->
		<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- Google Charts -->
		<script src="https://www.gstatic.com/charts/loader.js" type="text/javascript"></script>
		<!-- CSS: Bootstrap & my stylesheet devchallenge-styles.css -->
		<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"/>
		<link rel="stylesheet" type="text/css" href="Assets/devchallenge-styles.css"/>
	</head>
	<body>
		<h1 class="text-center white">Dev Challenge</h1>
		
		<!-- text input form to sign in [hidden by signUp()]-->
		<div id="signInDisplay" class="text-center" style="display: block;">
			<div class="login-form">
				<form action="loginHomepage" method="POST">
					<input type="text" name="username" class="frontpageInputField" placeholder="Username" required>
					<input type="password" name="password" class="frontpageInputField" placeholder="Password" required>
					<div class="text-center" style="position: absolute; bottom: 70px; width: 100%;">
						<input type="submit" class="devNavButton" value="LOG IN">
					</div>
				</form>
			</div>
		</div>

		<!-- text input form to register [hidden by signIn()]-->
		<div id="signUpDisplay" class="text-center" style="display: none;">
			<div class="login-form">
				<form action="registerHomepage" method="POST">
					<div>
						<input type="text" name="username" class="frontpageInputField" placeholder="Username" required>
						<input type="email" name="email" class="frontpageInputField" placeholder="Email" required>
					</div>
					<div>
						<input type="password" name="password" class="frontpageInputField" placeholder="Password" required>
						<input type="password" name="confirmPassword" class="frontpageInputField" placeholder="Confirm Password" required>
					</div>
					<div class="text-center" style="position: absolute; bottom: 70px; width: 100%;">
						<input type="submit" class="devNavButton" value="REGISTER">
					</div>
				</form>
			</div>
		</div>
		
		<!-- Text to switch between log-in and registration form -->
		<p class="text-center" style="position: absolute; bottom: 20px; width: 100%;">
			<span id="loginSwitchIntro" class="white">
				New to the challenge?
			</span>
			<span id="loginSwitchLink" class="gold orangeHover pointer" onclick="signUp();">
				Sign up
			</span>
		</p>

		<script type="text/javascript">
			var username;
			// function to show sign-up form (activated by clicking text "Sign up")
			function signUp() {
				$("#signInDisplay").attr("style","display: none");
				$("#signUpDisplay").attr("style","display: block");
				$("#loginSwitchIntro").html("Already registered?");
				$("#loginSwitchLink").html("Log in");
				$("#loginSwitchLink").attr("onclick","signIn();");
			}
			// function to show sign-in form (activated by clicking text "Log in")
			function signIn() {
				$("#signInDisplay").attr("style","display: block");
				$("#signUpDisplay").attr("style","display: none");
				$("#loginSwitchIntro").html("New to the challenge?");
				$("#loginSwitchLink").html("Sign up");
				$("#loginSwitchLink").attr("onclick","signUp();");
			}
			// function to handle the Login button
			/*
			function login() {
				username = $("#usernameInput").val()
				password = $("#passwordInput").val()
				if (username.length == 0 || password.length == 0) {
					alert("Please enter your username and password.");
				} else if (!accessMySQL(`SELECT 1 FROM dev-challenge WHERE Username=${username}`)) {
					alert("This username is not recognised.");
				} else if (password != accessMySQL(`SELECT Password FROM dev-challenge WHERE Username=${username}`)) {
					alert("This password is incorrect.");
				} else {
					console.log('LOG IN as', username);
					loadContent("p02-homepage.html");
				}
			}
			*/
			// function to handle the Register button
			/*
			function register() {
				username = $("#usernameInput").val()
				email    = $("#emailInput").val()
				password = $("#passwordInput").val()
				confirmPassword = $("#confirmPasswordInput").val()
				if (username.length < 5 || password.length < 5) {
					alert("Your username as password must both be a minimum of 5 characters.");
				} else if (email.match(/.+@.+\.[a-z]+(\.[a-z]{2})?/)) {
					alert("This email address is not valid.");
				} else if (password != confirmPassword) {
					alert("Please enter the same password twice.");
				} else if (accessMySQL(`SELECT 1 FROM dev-challenge WHERE Username=${username}`)) {
					alert("This username is already taken.");
				} else {
					accessMySQL(`INSERT INTO dev-challenge (Username, Email, Password) VALUES (${username}, ${email}, ${password})`)
					console.log('LOG IN NEW USER:', username);
					loadContent("p02-homepage.html");
				}
			}
			*/
		</script>
	</body>
</html>